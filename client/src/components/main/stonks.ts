import { customElement } from 'lit/decorators.js';
import { PageMixin } from '../page.mixin';
import { LitElement, html } from 'lit';
import sharedStyle from '../shared.css?inline';
import { httpClient } from '../../http-client';
import { router } from '../../router/router';

// The Main Page
@customElement('app-stonks')
// eslint-disable-next-line @typescript-eslint/no-unused-vars
class MainComponent extends PageMixin(LitElement) {
  static style = sharedStyle;

  async firstUpdated() {
    try {
      this.startAsyncInit();
      const newStatusJSON = await httpClient.get('/users/new' + location.search);
      const newStatus = (await newStatusJSON.json()).new;
      if (newStatus) {
        this.showNotification('new user was created successfully', 'info');
      }
    } catch (e) {
      if ((e as { statusCode: number }).statusCode === 401) {
        router.navigate('/users/sign-in');
      } else {
        this.showNotification((e as Error).message, 'error');
      }
    } finally {
      this.finishAsyncInit();
    }
  }

  render() {
    return html` ${this.renderNotification()}
      <h1>MAIN</h1>
      <app-notification></app-notification>
      <img
        src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAH8AwQMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAEBQIDBgABB//EAD8QAAIBAwMBBQYDBQcDBQAAAAECAwAEEQUSITETQVFhcQYUIjKBoZGx0RVCUsHwIzNTYnKC4QdjkiWDk6Ky/8QAGwEAAQUBAQAAAAAAAAAAAAAAAgEDBAUGAAf/xAAnEQACAgEDBQACAgMAAAAAAAABAgADEQQSIQUTMUFRImEUgQZxof/aAAwDAQACEQMRAD8AwGoaa8uGtShWGMgruyepIA8SAcUHays0QKsRJCeCPA/ofzohr+G0uJRafHGJiyDoGUjkZ7sEDHpVMEM7XJnaJYo3YkhjtGD3CtYufcrW8cw6/wBRa+tYElGJoycsOhFL7pTJAkgPKHY3p3GrZmtbdyrtJK4/dUbR+JqzTrqa4vYrW0t1DSnaFQZY8dcnw60YIVY2qt6EFhsLmRdxTs0/ikO0fer47S0j5lmadv4Y+B+P/FbO19l44F36i3vE/eCSVHkPGio9KtpZljEEe3w2Cqu3rNSnCjMmLpLXHJxMSlyIuLaGOLzxlvxNEW1le353xxu68/2hPFb+b2T06e3x7uieBT4SDWYvNPXRlms76V/d93awMpwZPFfXpT2n6lVedq8H9yPdpXqG4xfb6cklpHJNdJE8gYxow448T3UdBa2Zis7eSP47qIss+7o/hVm2G308vHEtzHEO1iEnPwt1+o5qV3Gr2SGyXLxFbiFB/CeoH1zUhrCZGmf1SNknVm+Yja4/zLwf5VrPZeLs9IiJAzKS5z+A/KkntEga4nVRggLN+Iw38jSv9pXhgSH3mRYkUKqodoAHpROpsUCOqCy4jn2h0uK1b3i3dFUn4oiQCD4il0p3Wtu/hujY+nI+x+1AbsncTz4mjrJHntp440ZiCrqAM85wfsaMKVHMM8DkytTTfTL+3Wzmsr4P2MnKso5U/wBYoBNOuAMy9nEP+44Bq5LW2XmS6L+USfzNIwDDBnF1hl3qibrVLIP2VqQVL9WNDXV095dNOyqHbGQvlU1NovyW7OfGV8/YVat3IOIljjH+RAPvQBMeoO8DwJHsr67Id1mk44aTp96sWwYf3txAnlnJ+1RMk0oLF3YDqSScVbaW0105SBMkckk4A9a48cmd3GMksNknzPNN/pG0VassEfEVrGPAv8RohdDvmdVVFfd3oc4p4nskILQy3rsr7c7VNV1/UtLSQGfmSqtFfaM44/czpvJ2GN+B4Lx+VQLFjliSfM5q3UbUWVz2YJZSu4GhwanKQRkSMBiWZrqhmupYuZk4TIwb3O327BljGuSB5mpXFpcRK8k7DcNvfuyDnv8ApTFsW8xmQlUlGx2jHQ9VcAePh5EVbdzRNKI3i3QMpfJBDHaRkY8ttFvOeI3M9cr2kIfq0fB9D0r6h/020e0Glxal2arczRCPee4A8n69PpXzu+hS2uSq4Mci5wpzgGvomh3Hufs7p1urY2QLkjvJ5NV3V7CKAB7k7RAF+fU0Oq28EMbMHBY0h01t9y/TIHGajd3hfgscetDaVOF1FS3ynINZzEsieY3bWoBiFhKpZ8LIU+E+WaE9rZ7KPTUaV4Dcod6QyEZcd4A9M00EFjvkkRWLy4yrMSq+g7qVa3a289tNcXByI1bKno+BgZpyhttqkfYFoyhExD6sytbixiaNIUKhXO8sD1B8uKjLLfzzJO2YSq7Vb+7Cr4Cl0E+p3UTG1WTs1+bsUCgfhUo9Mv7m2Fz8LBgSqu/xuB1wDW22qJRds+zDImhE2bi7jYv8LBSXJzxUews4XKMk0rqcHcwUfaqn0uOK2DyXsaztCJhEy4BXybx8qlK5kWKbvdAT6jg1wIPgwSMeDL0uEj/uLaCMjodu4/iaIgu5nmRZpWKk7SueMHijdG02O702UzDBd/7Nu8YH60rurWWznMUwwR0bubzFDvUkrEnmCjEHgg4NTVvxrrk5l3/4gD/iOfvmq8+FF6ijxNQukWEc0VlPLP71LHvDLgIOvH2NJ5IJI7l4GUl0bBAp1qc2W0bU16NtVj+HH/6q24EsHtHNJbQiU7FkIOOO6oDW2IhZeTj/ALHagjOA5wIw0/STcWEttaQTKsg+J5OM+dOtC9mbeGCRZJA5ON2OAap0P2mtbhiJTsYrg+A/Sm1ndLFKyuwCt31g+odS128pZ+I+TU0aKmtc1jP78wyK1gitiLNgAn7qjArtXdX0xjIvxmM4x6ZqiOVLVJMyq275VFRmuY7i07OTdvCEDHfxVQLjukjtknM+f65E6ypOz71kGAMY247qWg5ovVrwzyLEBhYvPqaCyBXq2nyaVJ+TIWjbYy/uTrqjmup3EHMzsVxdQW4i3JGo5BcgMOc49KomuQ23t7xpOzGAEBOB9qhbWsE0sglZ1Uxl4yvj3+uBmrbaC3gDiWHtLi3ZmkQgYdMYyPHHBosgTgog/vEAz2cEjkDPxt/IfrWt0e97bSrbAA2ptwvQY4pM7WrRxQbBFJLDlEVem8HIz4ZP5UZ7P2726yWzOHHzow6HPUf141XdTXfTn4ZK0pCviMpbn4sZqdlL/ar3c0BeK6OMDrVNveqkm1jhx3Gs9iWGZsp7hoYXkTllG7b3mk/tBc31zo8qvCkMrxkqisSSOvNG2K22qRiOdmDjoyHBFZr2p1CLT9agt7HcUtcGQu5Jckd+fI1I0VRsvUD1zAufahMS6Rd3Be3soMDdcrLuyeMdfpjNOlvIBJd3LIXSwuMxdmcMA/DfTOaS2d8LeZpLWxDkTdpGTyyjBG305og3epM4e3sUtxyCFiADg9Q2etawrk+JUHEd3B93tocQx3Wx1SUmPJMLdCB+H4UovIFtri8tUPwwOHTyVhyPyqgvqhuTcG5WCQqFyJFXC+GBXtrAVut895G5kBVsbmJz54pUTbzGzgDzGltrr21rFBDAvwLjLHqapvdUuL5NkwiwDkYXkfWgGezhYq00rMDghYgOfqa4XloPlgmf/VIB+QohWucgRMH5CmO61jbvRin0PI/nUFNeW16kiyxpaxjCFxuYtkj/AIzVY1KccRpEngFjFdFCtHGn6vd2tv2EcccsQbcqyJu2nyqYutTlu5Lpe1E0g2lguOPCk8l7fKxWSeZGHVcbftxV2mxXGo3SRb5GBPOWJppwlalziO10u7BRNP7OaY7zGWbCgcnLVrOM8yRgeRzQNpZNbotpGAGQZbzq+WMwRGWV0AXrg815h1XVtrdSWHjwJudJpl01ITMJElupAa4AY9BjrVySRCQLh8578CsjqWJryKOTUPdp3G6NNhIx5nuFEaVqs8SzC9aKRLZ9pIfr35B/CpNn+P6gUixOT8kUdS05sNZMU6lcRQXkqm2R2DHlmNCjU3H93BAnomfzo7WbeC5tZdUtpD8/xA9CM44pEDW90gzQmfOJmb1Q3OR9MP8A2ncf9v8A8BXUDmuqTgRrYvyI4u13Axqd6tuQgd/h9aveeUyRzRWXZvGBy54xzkemDj6UGPeJ2cpM+Nu8AsefL1q8RglXmGDj4gDzn+uaCy6tOXMFa39CSZ7lkjQi0TsSNrk/EMHIGfCj9CvfdbyJbu6jMWCigZwpPicdKUTr8H9lwRQbEOpyPKqjVa5bUKIPMk1VFWBM+jX0IYg4xSjUrGGRcsOR3g4NeexGoG9uE0m9mHx8Wzuf3v4CfyrXr7NXU+rCzkhcBT8QI61UbSsnZBnztbu8smKRysngc5OKra8ldzIxXtG6ttGT9a2X/VTSrfTdZsreFdo9yUsVGAzBiCfr/KsR2XPBya0Ojv0yKB4aVl1djc+RDbeG+u4u0ik4yVAMmCxxnAHfUbS1a7Wd5JxEsONzSZPU4FT0ZZJL+CFmcRq/aBO4kD86n7jcy3btMhgjkcM6lsfCzY+tWIf4ZEIxLE0fYh95mEbmXskwu4EkZBJ8DU/2XDFDGJ3nE0gfmNNyoVOMHAzR0jzR3ly7NHH2iiO3LOCNy9Mjuz417PdKkXYQ3McNywWX5/h3fvLmk3tBxM3eLG15G8rGOOYBmYDO09Dx6in9v7LW0iK4vXdGGQyAc/nSz2g7GWSV7dlZY3DZXp8Q5x9fzqnRtbn01Xix2kLA4XPyt4j9KNg5UFTHRkrxJTLb2WsGOBneGNwjMxGT3NXun3Uel3zNPaJctEcKGYjBB4NLNzOxLZJPJPjRV4S7pMOkqAn1HB+4+9GVyMGF7j32zi/9Xjnj5S6hR18z0/T8a0Xshpvutu90yEyKPhGM80p0+SPV7PTo5EcSWa7DIcYI/oCtP71swtsGiAXacHwrK9c1jCoadf7mi6No+O6w/wBRpKdlzFOynYyYJx30l1OZLtLq3tG2mBN/X5jz1/Ku1bWja2I3se0HfnqKyp1+QxTi2sUhlnXbJMGLEjyH41XdD6Uzv33HA8SR1bWdpO0p/Ix1rdxawy2VzNZxTi4ULvk/dXrwP91BarozpqTfs+3DRqgkZN3C+XpxS+z1W9itY7ZrVLhIjmPtYi230qXv+rNfG8XtRKRtIEfG3wx4VsFrZZlPHuN4pE1fQ7gmP3b3YkqsZwp4zyKzoNMLm71e6hMTRusR+ZEj2hvWhVsbv/AYepAokXaDDUge5Vmuq/3G6/wv/sP1rqPIhb1+zPSwmG3iCdcfHnqD1qhJpAcNyKc3tuWtIpBAyALtyOeh6edJMjeVJI+lZm7PcbMmpyohAYN61SQDkquWzyB31NV/hPpQ9ySmJUOOelNwpIq0bq6Egg5B8K+g6T7W3esxRwX91L7yiBUZGK7senf+dYVWWaIMe8da9tppbK5SWA7XQ5U07RZ23zjiN2pvXE1ntteahcXNhHqo3XEVsQspPMkZOVz/AJhnB8ayzttNP/aTUo9WtdLuVOJUR4pFPcAQR+dIJBmkuxvOItedgzLYZeOTwDXsoi272DEYJIB/WhycIB4mroipZQ4BUjkHvFFTa1bAgznQMORKhdWvXspT/wC4B/KuF3AOlqx9ZP8AiidNZLPUWtp4keOU9kZGzkKR3fY0ZBKEtV0+e4mhaJ2gcrECpBPwkkjj6Vpt48iVxQAwG1u43lWNrUKkvwElmIOf+cVwMS8CzhyPHd+tPZ7dpYobUz7DJGIVQplBIvf5E0GLJnmyEI3ckdSD3/fNEtinzAI+QNSCMi1tx/tP60ZCsk8aKkMG5HxjYCACM/yNaiP2RLWULRq3vG3LD+LvxTHRPZtkzJIhBx0IqPbq61Qn5HKaDY4EC0u2e1hCRRoGK5OEHAopp3iQu5UAf5RWisrF45AhVQrZydvP40h1exkc9jEDsB5461lhp21V+X8e5rH1iaWjC+pmNTk1G4kMyJIsX8WKpgttTuEDxdu6noQcVuP2XINTt5AGMUkQUr3d9Sj0O4eaOL4Uitm4I44rRV3pUgRRwJlbd9rl28mYWK21GeRo4zMzr8wLEY9akbHUFlSJ1cM/yZfg/Wt8NLMt1c4TEUkeGIPPqKAu9JYaUiWpYrE2SW+Yen40Y1IJjfbMyv7J1HPMLZ/1ChCCjsj/ADKcEVqrezlsrGa6dnZz8MYJOB/X8qzM0RDZOc958aerfcTmJtxKq6uwfCup2dKNOW4uNMlyWVQcktJuHIGMVnrlGWdhtDetaHRx29nPbIyxDdvk2nlh4c+dKr+AxZKxcfxE1m9amy8yxpbKQVCo6jFUXi7Izzwxz9aJiIIwRwaM1bQbi39nodWjcTWk5Ik2j+4kDYwfI+NRcx4KT4iuzb4drcjHSi9uFyCWX7il9plRmjY320sSTTB7/Q16TUZi23tI/mHVe5qrjnWZQyehHeDXTpKdtiof82PtU42y58uKruxugPkQahBLl2Ax1OK6dCphJIhRplRCwbawJIIGAc4q5Z7sXEk3vVszSABwynDY6ZGK9tlSWMRsVw7fOf3TTSDToOzh7eJe0ikKSgZG8HofXv8Aoa0OkuV6QfY4Mr78o36leny3zTFjc2zs77yGGQreIyOK2egaS8yq0jKzhyS2euefzrPaVZpGQsqAul3sY9MrivqGiWcMZxEPgOVIPODQ6i3aOIla7jzDtPsHwokl6+lNWtooUVgNxPygYyaSzi9klhTTp7dMIRcRMsZmL564ccrjGMUTpzXA1GN2Kx4LK0ATG07Cc4Py5IB48fOqOywsZYINniMIoILmASQEFWGc+VVLp0RlLqELd460hsLi6i0G4vrh0lnKoVBjUJuYhQSoAHGKP7K9trGea6mWSWO3a4ikWNUIK4yp2gAgg9/SkVyviK35eYzj0+OMAMEO3pnu9Km1uiQsQEYs3XGRycUlu5p7g6SLPbHNcrI7SlQ2AG8CMZ5649MVN5pYLrTkfbvuAyzbV2hmSQKGwOMnNKbCYIUQ6xVLia4UKoaCRomIGAcHFdcafGYWRURUbrilt173pbXcrRgvdX0i26dVUkkh3+nRe+p3MV3BaLb29xCl9vUhrgLhkxyE3fDuya4WGcUBgep6d2lr2SqCoOaw+rWDREnYcelb9I703MUVyqxzYJ37Qnaj/b8Jx4jxrOe0ySQsw3upHg1WOkuYnEj21/Jiuxb+E/hXtX9vcf48n/ka6rLcZH7bTNaNKYbxS3yP8DH8jRGrRGRznJUdP1pddCH54lEciHOCu0nxFMIbgS26A85XK+JHePUVXdSryFf+pI0x9RG26NzxgZ6mmema7eWEU1qojltJh/b20q7kk47/AA9R4UFqCAyFs9O6hozyaqZLBI8SyO2jB2qWGBx5eVWi3A6P+IqmFjlmPefwq3tMUUSWpEeRkEUMLNluN8RG09atEpHSpbmPBNdidG+l+zV5rdlcPp7RvJDgPGxweRwftWfuNOvdKnMOoQtDL+6G/e9DWt9h9dGhaw00ql4biIwyAEDAJBDc+GPvRv8A1C1jSdYhgjsmEsyuX3Af3Y8CfPwplmYOB6jyoprLHgiY2K4jVVU5B8AM1pLBzqOnsqyhJkwFY5zxyP51mlyo+AA+XfTPQr1ILo+8DEbrhwT08CKsdDaa7h8MhahNyGN4buftzHcdism8OcNjJAx0Jr6f7M38lxuZgNpwcAgisHLptvfWkMhGXTB3qcB1OeM1otEYWsUKA7QpIcfwkCrbVVDbxIdDDM0t32DnF5HPuA5JgEgJ8QcgjPganaPM1/HeGCb3e3jWIKxBkdQrDce7PxdPKgZteitRs3AkfkaLg1ZniDRyIynvzVM2mYeZO7qyu0i22M9rsnltCoTeIwkgxyGxnBwatu7ua8t3srdZXeWPsWleIRrGh+bAySSengKrfXxHK0bld/qKqj17tMmJQQOTgDikGmad3RGNvEReadGFIFpHIrMeh3EEY/CoXsckl/ZMsbFbVpC54wd0gYY+gpVJ7RrHJtkAVl8a9X2kixnHHjmi/itO7wjC1sXW41K7lSVoL2dmlhJ525+Fh4MvGK5pnlgKX6zMgPwv2QYFenxLng9+QT1oMe0sPTd96g/tBBjiTH0pP4rzu6smsob3a1sQ6wxTtK0kwCdRjaq5OF7/AFpL7aS7ZSxI+LpzXt/rKMpCzqO/lTWV1i7kvHLtdROcYyzEfyqdpdMVOYzZav2A9sPGuoPsX/xrf/5K6rHbGu4ssQWOspuXEd0OSoPz0mu3k028O4N2cY3FD3nOBg1VbrLbykN8w+IeIPjV2rXjalb28D4MqsSZD1Ix/wA0xr2WzTknzEoUpZxyJTeTxXa9pEOSuSo6ilYkKkjwNU9o3bmWIlQvyeQqEk5kcuABnqPOs7LGHJKD31crL41TpsFndgJNcyQz56CPINPI/ZRSu4Xz/RMUJsC+Y4tTMMiLQ6eNeiQHvoHUYprG/lthJuCHr41Sk7j90H60YOYBGDiNmPBU945zVKx7ejAjwoeO5LcS8eY5q0RoeVkalzEl4OOnWrIXLSYXIcHgr1FCbQvRzV9o0fbRtPuKZ5K9cU5SpdwFguQqkmPdH1h7Z2huJpCj5BLr8uevStJPqzWls0vax88hufiNZZ1lM8Uts6NMYSHYjrzt3evIq65mAuBbSKHiiVe2dl8OuBnitMHUj8hKgg5yJb+1rq6kG5F+RgWVw2T1H14+9XWWu3tk5ZUfaw5DA4NALpyRxzkg9sGdoTu6KuDz65pDcu8Nw3ZSMqn4htYjg80OFeOLyZpTrcxk3mQl85Jo+01TMt1atJgTJhCTgA9R+dZa8GoWDRCeXd2iB1yd305qM15IbeGRkjfcCpyPA+WO4il7akTirTW6hcXU0dkoGboxlWQMMnFe2+qzXWkXiOw3QbW4AGB/QNY8XKIVZrcqSMgpJj9athvY0DiOS4jDjD4wQR9qXsjbiIQwmy03Vri4jjeURRWcS7ZCwGH4/Oua/ji0x7qGJZAZyv8AaDoueMfasza6kyRLBFdRNGDkJLDkfkaLimujHKvYQSQS43Ih2DI7x4UJp5zBJI8xvfQl9QjjhJWGRO0LE/ItA61HBGltNaFtkwJyTnNDT6zdGb4ESNVQJ2bDeMeeald6nHd6dDD2KiVepC4C/wCnmlRGBETJgG8/5q8qP1NdUjE6f//Z"
        alt="SUCCECS"
      />
      <button type="button" @click="${this.submit}">Sign-Out</button>`;
  }
  async submit() {
    try {
      await httpClient.delete('/users/sign-out');
      router.navigate('/users/sign-in');
    } catch (e) {
      this.showNotification((e as Error).message, 'error');
    }
  }
}
